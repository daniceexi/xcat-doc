<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
</head>
<body>
<div id="TOC">
<ul>
<li><a href="#boot-targets-and-customized-installation-methods">Boot Targets and Customized Installation Methods</a></li>
</ul>
</div>
<p><!-- START doctoc generated TOC please keep comment here to allow auto update --> <!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE --> Table of Contents</p>
<ul>
<li><a href="#boot-targets-and-customized-installation-methods">Boot Targets and Customized Installation Methods</a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->

<p><a href="Howto_Warning">Howto_Warning</a></p>
<h2 id="boot-targets-and-customized-installation-methods"><a href="#TOC">Boot Targets and Customized Installation Methods</a></h2>
<p>Even though xCAT has almost every booting/netbooting/installing method under the sun ready for you to roll, some people just can't have enough. And need to do it &quot;their own way&quot;. We fully understand this need and embrace it. Therefore, this howto is on how to set up customized methods of installations. For example, you may already have a nfsroot solution of your own and have the kernel &amp; the ramdisk ready to roll. You can easily integrate this into xCAT with the boottarget table.</p>
<p>xCAT provides a table called boottarget (available in later releases of 2.1 and above). This table looks as follows:</p>
<pre><code>[root@wopr xCAT]# tabdump boottarget
#bprofile,kernel,initrd,kcmdline,comments,disable
&quot;foobooter&quot;,&quot;kernel-2.8.myownkernel&quot;,&quot;secretinitd.gz&quot;,,,
&quot;test2&quot;,&quot;kernel-2.8&quot;,,&quot;arg1 vale to ipsom lorum=wer&quot;,,</code></pre>
<p>There are 4 important fields:<br />bprofile: This is the name that you give your set of kernel and parameters.<br />kernel: This goes in the kernel field<br />initrd: If you put this in you'll get the initrd=&lt;whateveryou put in the field&gt;<br />kcmdline: Additional items to set to the command line.</p>
<p>In order to assign nodes to this boottarget, you need to modify the nodetype table:</p>
<pre><code>#node,os,arch,profile,nodetype,comments,disable
&quot;x3455001&quot;,&quot;boottarget&quot;,&quot;x86&quot;,&quot;test2&quot;,,,</code></pre>
<p>Here you can see that my node x3455001 has set the os field to be boottarget. We have also set the profile to be test2. The nodetype.profile should match the boottarget.bprofile field.</p>
<p>You can then run:</p>
<pre><code>[root@wopr xCAT]# nodeset x3455001 netboot
x3455001: netboot boottarget-x86-test2</code></pre>
<p>Now, you'll see your /tftpboot/pxelinux.cfg/&lt;nodehex&gt; file shows:</p>
<pre><code>#netboot boottarget-x86-test2
DEFAULT xCAT
LABEL xCAT
 KERNEL kernel2.8
 APPEND arg1 vale to ipsom lorum=wer</code></pre>
<p>now reboot your node and you're on your way!</p>
<p>Once you've done this - the next step that you might want to consider is setting up a notification trigger so that when you change a nodes' profile in the nodetype table or a parameter in an applicable boot target table entry that the appropriate pxelinux.cfg files are updated. To do this you simply:</p>
<pre><code>#regnotif bootttmon.pm -o u</code></pre>
<p>Then whenever you use the <strong>chdef</strong> command to change a node (or nodegroup) profile in the nodetype table or any of the fields in the boottarget table the pxelinux.cfg files will be updated as appropriate. <strong>Note well:</strong> Use of the <strong>tabedit</strong> command will not cause this notification handler to be invoked. A log file /var/log/bootttmon is generated with timestamped entries showing changed data and actions taken as a result of the changes.</p>
</body>
</html>
