<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
</head>
<body>
<div id="TOC">
<ul>
<li><a href="#installing-additional-packages-using-an-otherpkgs-pkglist">Installing Additional Packages Using an Otherpkgs Pkglist</a></li>
</ul>
</div>
<p><!-- START doctoc generated TOC please keep comment here to allow auto update --> <!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE --> Table of Contents</p>
<ul>
<li><a href="#installing-additional-packages-using-an-otherpkgs-pkglist">Installing Additional Packages Using an Otherpkgs Pkglist</a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->

<h3 id="installing-additional-packages-using-an-otherpkgs-pkglist"><a href="#TOC">Installing Additional Packages Using an Otherpkgs Pkglist</a></h3>
<p>If you have additional rpms (rpms <strong>not</strong> in the distro) that you also want installed, make a directory to hold them, create a list of the rpms you want installed, and add that information to the osimage definition:</p>
<ul>
<li><p>Create a directory to hold the additional rpms:</p>
<p>mkdir -p /install/post/otherpkgs/rh/x86_64 cd /install/post/otherpkgs/rh/x86_64 cp /myrpms/* . createrepo .</p></li>
</ul>
<p><strong>NOTE</strong>: when the management node is rhels6.x, and the otherpkgs repository data is for rhels5.x, we should run createrepo with &quot;-s md5&quot;. Such as:</p>
<pre><code>createrepo -s md5 .</code></pre>
<ul>
<li><p>Create a file that lists the additional rpms that should be installed. For example, in /install/custom/netboot/rh/compute.otherpkgs.pkglist put:</p>
<p>myrpm1 myrpm2 myrpm3</p></li>
<li><p>Add both the directory and the file to the osimage definition:</p>
<p>chdef -t osimage mycomputeimage otherpkgdir=/install/post/otherpkgs/rh/x86_64 otherpkglist=/install/custom/netboot/rh/compute.otherpkgs.pkglist</p></li>
</ul>
<p>If you add more rpms at a later time, you must run createrepo again. The createrepo command is in the createrepo rpm, which for RHEL is in the 1st DVD, but for SLES is in the SDK DVD.</p>
<p>If you have <strong>multiple sets of rpms</strong> that you want to <strong>keep separate</strong> to keep them organized, you can put them in separate sub-directories in the otherpkgdir. If you do this, you need to do the following extra things, in addition to the steps above:</p>
<ul>
<li>Run createrepo in each sub-directory</li>
<li><p>In your otherpkgs.pkglist, list at least 1 file from each sub-directory. (During installation, xCAT will define a yum or zypper repository for each directory you reference in your otherpkgs.pkglist.) For example:</p>
<p>xcat/xcat-core/xCATsn xcat/xcat-dep/rh6/x86_64/conserver-xcat</p></li>
</ul>
<p>There are some examples of otherpkgs.pkglist in /opt/xcat/share/xcat/netboot/&lt;distro&gt;/service.*.otherpkgs.pkglist that show the format.</p>
<p>Note: the otherpkgs postbootscript should by default be associated with every node. Use lsdef to check:</p>
<pre><code>lsdef node1 -i postbootscripts</code></pre>
<p>If it is not, you need to add it. For example, add it for all of the nodes in the &quot;compute&quot; group:</p>
<pre><code>chdef -p -t group compute postbootscripts=otherpkgs</code></pre>
</body>
</html>
