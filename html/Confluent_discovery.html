<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
</head>
<body>
<div id="TOC">
<ul>
<li><a href="#detection">Detection</a><ul>
<li><a href="#pxe-detection">PXE detection</a></li>
<li><a href="#boot-image-detection">Boot image detection</a></li>
<li><a href="#vendor-specific">Vendor specific</a></li>
</ul></li>
<li><a href="#discovery">Discovery</a><ul>
<li><a href="#methods">Methods</a></li>
<li><a href="#actions">Actions</a></li>
</ul></li>
</ul>
</div>
<p><!-- START doctoc generated TOC please keep comment here to allow auto update --> <!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE --> Table of Contents</p>
<ul>
<li><a href="#detection">Detection</a></li>
<li><a href="#pxe-detection">PXE detection</a></li>
<li><a href="#boot-image-detection">Boot image detection</a></li>
<li><a href="#vendor-specific">Vendor specific</a></li>
<li><a href="#discovery">Discovery</a></li>
<li><a href="#methods">Methods</a></li>
<li><a href="#actions">Actions</a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->

<p><a href="Design_Warning">Design_Warning</a></p>
<p>Confluent should expand the discovery facility present in xCAT 2. The general flow is that things are divided into two pieces:</p>
<ol style="list-style-type: decimal">
<li>detection. Something being detected simply causes confluent to take note of it under the /detected/ collection and notify any 'discovery' handles of the new or updated entry</li>
<li>discovery. Classifiying a detected object as a known entity. This could be an automated action due to switch or enclosure matching. It could be a client application implementing a first-come, first-serve scheme to assign detected to existing nodes, or a client application creating nodes and then assigning them based on what is seen. The first come, first serve model I think best implemented as a client utility rather than a server capability (shouldn't be full-time automatic)</li>
</ol>
<h1 id="detection"><a href="#TOC">Detection</a></h1>
<p>To the extent reasonable, this should be a non-intrusive collection of information about relevant targets. A detected node is not told to boot anything or reconfigured at all. Sometimes multiple sources will indicate different facets of a single node (e.g. PXE and service processor). Those sources will merge into a single source of data.</p>
<h2 id="pxe-detection"><a href="#TOC">PXE detection</a></h2>
<p>As per [Confluent_bootsupport] the intent is to bring in the facility to respond to DHCP requests. Take advantage of the situation to detect a potentially actionable amount of data before the first OFFER is even sent. Auto-detection could even occur before any boot directive sent to node.</p>
<h2 id="boot-image-detection"><a href="#TOC">Boot image detection</a></h2>
<p>If the above is insufficient or triggers an inquiry for more data, boot genesis. This enables deeper exploration of a node, what network interfaces it has, and so on. Unlike xCAT, where this always happens, have it be an option disabled by default. The deeper inventory would likely be a result of 'discovery', but 'detection' will be less disruptive. The ability to find a node by a non-boot NIC would require this feature be enabled, but searching server enclosures and switches would not require this most of the time.</p>
<h2 id="vendor-specific"><a href="#TOC">Vendor specific</a></h2>
<p>Implement vendor-specific detection capabilities as appropriate for product, service processors being high on list.</p>
<h1 id="discovery"><a href="#TOC">Discovery</a></h1>
<h2 id="methods"><a href="#TOC">Methods</a></h2>
<p>Same as xCAT:</p>
<ul>
<li>snmp of switches</li>
<li>interrogation of server enclosure managers</li>
</ul>
<h2 id="actions"><a href="#TOC">Actions</a></h2>
<ul>
<li>For a compute node that is discovered, boot into Genesis for a deeper inventory followed by administrator defined 'chain' with a default of parking it in an sshable state for future action.</li>
<li>Other resources may have specific discovery responses coded into plugins. For example, IMM would have a remote login and remote configure.</li>
</ul>
</body>
</html>
