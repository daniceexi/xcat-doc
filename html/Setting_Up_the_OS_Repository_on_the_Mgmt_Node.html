<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
</head>
<body>
<div id="TOC">
<ul>
<li><a href="#get-the-requisite-packages-from-the-distro"><strong>Get the Requisite Packages From the Distro</strong></a></li>
</ul>
</div>
<p><!-- START doctoc generated TOC please keep comment here to allow auto update --> <!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE --> Table of Contents</p>
<ul>
<li><a href="#get-the-requisite-packages-from-the-distro"><strong>Get the Requisite Packages From the Distro</strong></a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->

<h2 id="get-the-requisite-packages-from-the-distro"><a href="#TOC"><strong>Get the Requisite Packages From the Distro</strong></a></h2>
<p>xCAT depends on several packages that come from the Linux distro. Follow this section to create the repository of the OS on the Management Node.</p>
<p><strong>[RHEL] Setup repository</strong></p>
<p>To make the necessary RHEL RPM prereqs available to the xCAT install process, mount the RHEL CD/DVD or ISO and then create a repo file in /etc/yum.repos.d that points to it.</p>
<p><strong>If you have the RHEL iso files:</strong></p>
<p><strong>If the RHEL distro only has one iso file:</strong></p>
<p>Copy the iso file to any directory, such as /iso</p>
<pre><code>mkdir /iso
cp RHEL5.2-Server-20080430.0-ppc-DVD.iso /iso/</code></pre>
<p>Mount the iso file to a directory such as /iso/rhels5.2</p>
<pre><code>cd /iso
mkdir /iso/rhels5.2
mount -o loop RHEL5.2-Server-20080430.0-ppc-DVD.iso /iso/rhels5.2</code></pre>
<p>Create a YUM repository file, for example, rhel-dvd.repo, under directory /etc/yum.repos.d. The YUM repository contents should look like:</p>
<pre><code>[rhe-5-server]
name=RHEL 5 SERVER packages
baseurl=file:///iso/rhels5.2/Server
enabled=1
gpgcheck=1</code></pre>
<p>Note: To make the YUM repository work persistently after management node reboot, the iso mount needs to be added into the /etc/fstab, or add the mount command into Linux startup scripts.</p>
<p><strong>If the RHEL distro has more than one iso files</strong></p>
<p><strong>For each iso file:</strong></p>
<ul>
<li>Loopback mount the iso file</li>
<li>For the 1st iso file only, cd to the mounted directory and run: rpm --import RPM-GPG-KEY-redhat-release</li>
<li>Copy the RPMs from the Server subdirectory of the mounted directory to a directory on your hard disk (for example /rhels5.3). You can put the RPMs from all of the iso files into the same directory.</li>
<li>cd into the newly created RPM directory, install the createrepo RPM, and run: createrepo .</li>
<li><p>Create a YUM repository file, for example, rhel-cd.repo, in directory /etc/yum.repos.d. The YUM repository contents should look like:</p>
<p>[rhel-5.3] name=RHEL 5.3 from directory baseurl=file:///rhels5.3 enabled=1 gpgcheck=1</p></li>
</ul>
<p><strong>For either case above:</strong></p>
<p>change directory to where the RHEL CD image is and run</p>
<pre><code>cd /iso/rhels5.2
rpm --import RPM-GPG-KEY-redhat-release</code></pre>
<p>Check that the repo is set up correctly by looking for one rpm:</p>
<pre><code>yum list screen</code></pre>
<p><strong>Note:</strong> For RHEL 6.1 and RHEL 6.2 on x86_64 platform, the package perl-Net-Telnet, which is required by xCAT, but is not included in the repository &lt;os_name&gt;/Server, you need to add the perl-Net-Telnet into the yum repository through whatever method, a simple way is to add a new yum repository that points to the &lt;os_name&gt;/HighAvailability:</p>
<pre><code> [root@xcatmn ~]# cat /etc/yum.repos.d/rhels6.1.ha.repo 
 [rhe-6.1-server-ha]
 name=RHEL 6.1 HA packages
 baseurl=file:///iso/rhels6.1/x86_64/HighAvailability
 enabled=1
 gpgcheck=1
 [root@xcatmn ~]# </code></pre>
<p><strong>[SLES] Setup repository</strong></p>
<p>If you have a SLES ISO:</p>
<pre><code>mkdir /iso
copy SLES11-DVD-ppc-GM-DVD1.iso to /iso/
mkdir /iso/1
cd /iso
mount -o loop SLES11-DVD-ppc64-GM-DVD1.iso 1
zypper ar [../../../iso/1 file:///iso/1] sles11
or
zypper ar file:///iso/1  sles11</code></pre>
<p>Check that the repo is set up correctly by looking for one rpm:</p>
<pre><code>zypper search --match-exact -s screen</code></pre>
<p><strong>[FEDORA] Setup the repository</strong></p>
<p>If your management node <em>has access</em> to the internet, you can simply create a file called <strong>/etc/yum.repos.d/fedora-internet.repo</strong> that contains:</p>
<pre><code>[fedora-everything]
name=Fedora $releasever - $basearch
failovermethod=priority
#baseurl=http://download.fedora.redhat.com/pub/fedora/linux/releases/$releasever/Everything
/$basearch/os/
mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=fedora-$releasever&amp;arch=$basearch
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora [../../../etc/pki/rpm-gpg/RPM-GPG-KEY
file:///etc/pki/rpm-gpg/RPM-GPG-KEY]</code></pre>
<p>Check that the repo is set up correctly by looking for one rpm:</p>
<pre><code>yum list screen</code></pre>
<p>If your management node <em>does not have internet access</em>, then download the iso of Fedora OS and setup the repository like <strong>[RHEL] Setup repository</strong> part.</p>
</body>
</html>
