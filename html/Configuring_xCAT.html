<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
</head>
<body>
<div id="TOC">
<ul>
<li><a href="#networks-table"><strong>Networks Table</strong></a></li>
<li><a href="#passwd-table"><strong>passwd Table</strong></a></li>
<li><a href="#setup-dns"><strong>Setup DNS</strong></a></li>
<li><a href="#setup-tftp"><strong>Setup TFTP</strong></a></li>
<li><a href="#setup-conserver"><strong>Setup conserver</strong></a></li>
<li><a href="#setup-dhcp"><strong>Setup DHCP</strong></a><ul>
<li><a href="#optionalsetup-the-dhcp-interfaces-in-site-table"><strong>(Optional)Setup the DHCP interfaces in site table</strong></a></li>
<li><a href="#initialize-dhcp-service"><strong>Initialize DHCP service</strong></a></li>
</ul></li>
</ul>
</div>
<p><!-- START doctoc generated TOC please keep comment here to allow auto update --> <!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE --> Table of Contents</p>
<ul>
<li><a href="#networks-table"><strong>Networks Table</strong></a></li>
<li><a href="#passwd-table"><strong>passwd Table</strong></a></li>
<li><a href="#setup-dns"><strong>Setup DNS</strong></a></li>
<li><a href="#setup-tftp"><strong>Setup TFTP</strong></a></li>
<li><a href="#setup-conserver"><strong>Setup conserver</strong></a></li>
<li><a href="#setup-dhcp"><strong>Setup DHCP</strong></a></li>
<li><a href="#optionalsetup-the-dhcp-interfaces-in-site-table"><strong>(Optional)Setup the DHCP interfaces in site table</strong></a></li>
<li><a href="#initialize-dhcp-service"><strong>Initialize DHCP service</strong></a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->


<h3 id="networks-table"><a href="#TOC"><strong>Networks Table</strong></a></h3>
<p>All networks in the cluster must be defined in the networks table. When xCAT was installed, it ran makenetworks, which created an entry in this table for each of the networks the management node is connected to. Now is the time to add to the networks table any other networks in the cluster, or update existing networks in the table.</p>
<p>For a sample Networks Setup, see the following example in Appendix_A <a href="Setting_Up_a_Linux_xCAT_Mgmt_Node/#appendix-a-network-table-setup-example">Setting_Up_a_Linux_xCAT_Mgmt_Node#Appendix_A:_Network_Table_Setup_Example</a></p>
<h3 id="passwd-table"><a href="#TOC"><strong>passwd Table</strong></a></h3>
<p>The password should be set in the passwd table that will be assigned to root when the node is installed. You can modify this table using tabedit. To change the default password for root on the nodes, change the system line. To change the password to be used for the BMCs (x-series only), change the ipmi line.</p>
<pre><code>tabedit passwd
#key,username,password,cryptmethod,comments,disable
&quot;system&quot;,&quot;root&quot;,&quot;cluster&quot;,,,
&quot;hmc&quot;,&quot;hscroot&quot;,&quot;ABC123&quot;,,,</code></pre>
<h3 id="setup-dns"><a href="#TOC"><strong>Setup DNS</strong></a></h3>
<p>To get the hostname/IP pairs copied from /etc/hosts to the DNS on the MN:</p>
<ul>
<li>Ensure that /etc/sysconfig/named does not have ROOTDIR set</li>
<li>Set site.forwarders to your site-wide DNS servers that can resolve site or public hostnames. The DNS on the MN will forward any requests it can't answer to these servers.</li>
</ul>
<pre><code>    chdef -t site forwarders=1.2.3.4,1.2.5.6</code></pre>
<ul>
<li><p>Edit /etc/resolv.conf to point the MN to its own DNS. (Note: this won't be required in xCAT 2.8 and above.)</p>
<p>search cluster nameserver 172.20.0.1</p></li>
<li><p>Run makedns</p></li>
</ul>
<pre><code>    makedns -n</code></pre>
<p>For more information about name resolution in an xCAT Cluster, see [Cluster_Name_Resolution].</p>
<h3 id="setup-tftp"><a href="#TOC"><strong>Setup TFTP</strong></a></h3>
<p>Nothing to do here - the TFTP server is done by xCAT during the Management Node install.</p>
<h3 id="setup-conserver"><a href="#TOC"><strong>Setup conserver</strong></a></h3>
<pre><code>    makeconservercf</code></pre>
<h3 id="setup-dhcp"><a href="#TOC"><strong>Setup DHCP</strong></a></h3>
<h4 id="optionalsetup-the-dhcp-interfaces-in-site-table"><a href="#TOC"><strong>(Optional)Setup the DHCP interfaces in site table</strong></a></h4>
<p>To set up the site table dhcp interfaces for your system p cluster, identify the correct interfaces that xCAT should listen to on your management node and service nodes:</p>
<pre><code>     chdef -t site dhcpinterfaces=&#39;pmanagenode|eth1;service|eth0&#39;</code></pre>
<h4 id="initialize-dhcp-service"><a href="#TOC"><strong>Initialize DHCP service</strong></a></h4>
<p>Create a new dhcp configuration file with a network statement for each network the dhcp daemon should listen on.</p>
~~~~ makedhcp -n service dhcpd restart ~~~~
</body>
</html>
