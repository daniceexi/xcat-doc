<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
</head>
<body>
<div id="TOC">
<ul>
<li><a href="#managing-large-tables"><strong>Managing Large Tables</strong></a><ul>
<li><a href="#auditlog">auditlog</a></li>
<li><a href="#eventlog">eventlog</a></li>
<li><a href="#setting-up-cron-to-maintain-the-tables">Setting up cron to maintain the tables</a></li>
</ul></li>
</ul>
</div>
<p><!-- START doctoc generated TOC please keep comment here to allow auto update --> <!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE --> Table of Contents</p>
<ul>
<li><a href="#managing-large-tables"><strong>Managing Large Tables</strong></a></li>
<li><a href="#auditlog">auditlog</a></li>
<li><a href="#eventlog">eventlog</a></li>
<li><a href="#setting-up-cron-to-maintain-the-tables">Setting up cron to maintain the tables</a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->

<div class="figure">
<img src="https://sourceforge.net/p/xcat/wiki/XCAT_Documentation/attachment/Official-xcat-doc.png" /><p class="caption"></p>
</div>
<h2 id="managing-large-tables"><a href="#TOC"><strong>Managing Large Tables</strong></a></h2>
<p>Tables in xCAT can become quite large. You should have in place a process for pruning tables such as the auditlog, eventlog. New entries are generated automatically for these tables based on your setup. Before backing up the xCAT tables, you may want to limit the amount of data in these tables. See tabprune below. As of xCAT 2.6 and later releases dumpxCATdb will not dump and restorexCATdb will not restore the auditlog or eventlog table without the -a option.</p>
<h3 id="auditlog"><a href="#TOC">auditlog</a></h3>
<p>You can control the amount of auditing with the site.auditskipcmds attribute. This attribute allows you to enter a list of commands that will not be logged, or the variable &quot;ALL&quot; which means log no commands. See the manpage for the site table.</p>
<p>For maintaining the table use the tabprune command, see man page: http://xcat.sourceforge.net/man8/tabprune.8.html</p>
<h3 id="eventlog"><a href="#TOC">eventlog</a></h3>
<p>If you have monitoring in place, you should put in place a process for deleting entries to the eventlog table which can become quite large.</p>
<p>For maintaining the table use the tabprune command, see man page: http://xcat.sourceforge.net/man8/tabprune.8.html</p>
<h3 id="setting-up-cron-to-maintain-the-tables"><a href="#TOC">Setting up cron to maintain the tables</a></h3>
<p>You can setup a cron job to automatically prune the auditlog and eventlog. For example, if you want to prune all data up to 7 days ago, each Sunday night at midnight and 1 a.m, then run:</p>
<pre><code>    crontab -e</code></pre>
<p>add these two lines</p>
<pre><code>    
    0 0 * * 0 /opt/xcat/sbin/tabprune auditlog -d 7
    0 1 * * 0 /opt/xcat/sbin/tabprune eventlog -d 7</code></pre>
</body>
</html>
