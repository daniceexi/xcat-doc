<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
</head>
<body>
<div id="TOC">
<ul>
<li><a href="#xcat-2-user-tips-and-tricks">xCAT 2 User Tips and Tricks</a><ul>
<li><a href="#setting-the-time-zone-of-a-diskless-image">Setting the Time Zone of a Diskless Image</a></li>
<li><a href="#wiping-node-hard-drives">Wiping Node Hard Drives</a></li>
<li><a href="#use-nodeset-nr-shell-instead-of-a-recovery-cd">Use &quot;nodeset &lt;nr&gt; shell&quot; Instead of a Recovery CD</a></li>
<li><a href="#use-lsdef-to-list-node-attributes">Use lsdef to list node attributes</a></li>
<li><a href="#database-documentation">Database Documentation</a></li>
<li><a href="#use-regular-expressions-in-your-tables-to-greatly-reduce-the-size-of-the-tables">Use Regular Expressions in Your Tables to Greatly Reduce the Size of the Tables</a></li>
<li><a href="#install-esx-3.5">Install ESX 3.5</a></li>
<li><a href="#install-server-notes">Install Server Notes</a></li>
<li><a href="#what-to-do-if-rhels-6.x-install-fails-with-cleardisksel-error">What to do if RHELS 6.x install fails with &quot;cleardisksel&quot; error</a></li>
</ul></li>
</ul>
</div>
<p><!-- START doctoc generated TOC please keep comment here to allow auto update --> <!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE --> Table of Contents</p>
<ul>
<li><a href="#xcat-2-user-tips-and-tricks">xCAT 2 User Tips and Tricks</a></li>
<li><a href="#setting-the-time-zone-of-a-diskless-image">Setting the Time Zone of a Diskless Image</a></li>
<li><a href="#wiping-node-hard-drives">Wiping Node Hard Drives</a></li>
<li><a href="#use-nodeset-&amp;ltnr&amp;gt-shell-instead-of-a-recovery-cd">Use &quot;nodeset &lt;nr&gt; shell&quot; Instead of a Recovery CD</a></li>
<li><a href="#use-lsdef-to-list-node-attributes">Use lsdef to list node attributes</a></li>
<li><a href="#database-documentation">Database Documentation</a></li>
<li><a href="#use-regular-expressions-in-your-tables-to-greatly-reduce-the-size-of-the-tables">Use Regular Expressions in Your Tables to Greatly Reduce the Size of the Tables</a></li>
<li><a href="#install-esx-35">Install ESX 3.5</a></li>
<li><a href="#install-server-notes">Install Server Notes</a></li>
<li><a href="#what-to-do-if-rhels-6x-install-fails-with-cleardisksel-error">What to do if RHELS 6.x install fails with &quot;cleardisksel&quot; error</a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->


<h1 id="xcat-2-user-tips-and-tricks"><a href="#TOC">xCAT 2 User Tips and Tricks</a></h1>
<h2 id="setting-the-time-zone-of-a-diskless-image"><a href="#TOC">Setting the Time Zone of a Diskless Image</a></h2>
<pre><code>
   &lt;pre&gt;cat &gt;/install/netboot/.......rootimg/etc/sysconfig/clock &lt;&lt;EOF
    ZONE=&quot;US/Mountain&quot;
    UTC=true
    ARC=false
    EOF

    cp -f /usr/share/zoneinfo/MST7MDT /install/netboot/.......rootimg/etc/localtime&lt;/pre&gt;
</code></pre>
<p>The above will change the default to US/Mountain - MST7MDT time.</p>
<hr />
<h2 id="wiping-node-hard-drives"><a href="#TOC">Wiping Node Hard Drives</a></h2>
<p>This tip comes from Shadd, off of the xcat mailing list: its a quick and dirty way to wipe the hard drives in the cluster.</p>
<pre><code>  psh all dd if=/dev/urandom of=/dev/hda &amp;&amp; dd if=/dev/zero of=/dev/hda </code></pre>
<p>if you want to erase all drives on all nodes that should be enough just change hda to sda if it is scsi</p>
<hr />
<h2 id="use-nodeset-nr-shell-instead-of-a-recovery-cd"><a href="#TOC">Use &quot;nodeset &lt;nr&gt; shell&quot; Instead of a Recovery CD</a></h2>
<p>Why use a rescue CD when you can &quot;nodeset &lt;noderange&gt; shell&quot;? On the next boot, you should be able to psh, ssh, mount, vi, etc etc etc. The &quot;nodeset &lt;noderange&gt; shell&quot; command is like a builtin rescue CD for many nodes.</p>
<hr />
<h2 id="use-lsdef-to-list-node-attributes"><a href="#TOC">Use lsdef to list node attributes</a></h2>
<p>All of the *def (object definition) commands know which tables all the attributes belong. And since they default to working with the node object type, <strong>lsdef nodename</strong> will list all the attributes that are set for this node in any table.</p>
<hr />
<h2 id="database-documentation"><a href="#TOC">Database Documentation</a></h2>
<p>An overview of all the tables can be viewed by running <strong>man xcatdb</strong> or by going to the <a href="http://xcat.sf.net/man5/xcatdb.5.html">xCAT Database Man Pages</a>. A description of a specific table is available using <strong>man tablename</strong> .</p>
<hr />
<h2 id="use-regular-expressions-in-your-tables-to-greatly-reduce-the-size-of-the-tables"><a href="#TOC">Use Regular Expressions in Your Tables to Greatly Reduce the Size of the Tables</a></h2>
<p>In all the node-related tables (except for the <strong>nodelist</strong> table), you can use regular expressions in a single row to represent many rows that would be only slightly different and conform to a pattern. See <a href="http://xcat.sf.net/man5/xcatdb.5.html">xCAT Database Man Pages</a> for details and examples.</p>
<hr />
<h2 id="install-esx-3.5"><a href="#TOC">Install ESX 3.5</a></h2>
<p><a href="ESX_3.5_&amp;amp;_xCAT">See here for tutorial</a></p>
<h2 id="install-server-notes"><a href="#TOC">Install Server Notes</a></h2>
<p><a href="InstallServer">Here are notes to set up an install server with SLES10.1</a></p>
<h2 id="what-to-do-if-rhels-6.x-install-fails-with-cleardisksel-error"><a href="#TOC">What to do if RHELS 6.x install fails with &quot;cleardisksel&quot; error</a></h2>
<p>If RHELS 6.x fails to install using xCAT 2.7 or later, then the problem could due to the fact that xCAT now puts the &quot;cmdline&quot; argument on the kernel command line when installing RHELS 6.x on a node. Then if the RHELS 6.x kickstart install template does not include something defining the partitions (e.g., installing onto a pre-partitioned drive), then the following error will occur:</p>
<pre><code>Examining storage devices
In interactive step cleardiskssel, can&#39;t continue</code></pre>
<p>One way to work around this, in the pre-partitioned drive install case, is to add the following line to the kickstart install template:</p>
<pre><code>    clearpart --none</code></pre>
<hr />
</body>
</html>
