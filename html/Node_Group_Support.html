<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
</head>
<body>
<div id="TOC">
<ul>
<li><a href="#xcat-node-group-support-static-and-dynamic">xCAT node group support ( static and dynamic)</a><ul>
<li><a href="#creating-a-static-node-group">Creating a static node group</a></li>
<li><a href="#creating-a-dynamic-node-group">Creating a dynamic node group</a></li>
</ul></li>
</ul>
</div>
<p><!-- START doctoc generated TOC please keep comment here to allow auto update --> <!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE --> Table of Contents</p>
<ul>
<li><a href="#xcat-node-group-support--static-and-dynamic">xCAT node group support ( static and dynamic)</a></li>
<li><a href="#creating-a-static-node-group">Creating a static node group</a></li>
<li><a href="#creating-a-dynamic-node-group">Creating a dynamic node group</a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->

<div class="figure">
<img src="http://sourceforge.net/p/xcat/wiki/XCAT_Documentation/attachment/Official-xcat-doc.png" /><p class="caption"></p>
</div>
<h2 id="xcat-node-group-support-static-and-dynamic"><a href="#TOC">xCAT node group support ( static and dynamic)</a></h2>
<p>A node group is essentially a named collection of cluster nodes that can be used as a simple way to target an action to a specific set of nodes. The node group names can be used in any xCAT command that targets a node range.</p>
<p>XCAT supports both static and dynamic groups. A static group is defined to contain a specific set of cluster nodes. A dynamic node group is one that has its members determined by specifying a selection criteria for node attributes. If a nodes attribute values match the selection criteria then it is dynamically included as a member of the group. The actual group membership will change over time as nodes have attributes set or unset. This provides flexible control over group membership by defining the attributes that define the group, rather than the specific node names that belong to the group. The selection criteria is a list of &quot;attr&lt;operator&gt;val&quot; pairs that can be used to determine the members of a group, (see below).</p>
<p>Note: Dynamic node group support is available in xCAT version 2.3 and later.</p>
<p>In xCAT, the definition of a static group has been extended to include additional attributes that would normally be assigned to individual nodes. When a node is part of a static group definition it can inherit the attributes assigned to the group. This feature can make it easier to define and manage cluster nodes in that you can generally assign nodes to the appropriate group and then just manage the group definition instead of multiple node definitions. This feature is not supported for dynamic groups.</p>
<p>To list all the attributes that may be set for a group definition you can run:</p>
<pre><code>
    lsdef -t group -h</code></pre>
<p>When a node is included in one or more static groups a particular node attribute could actually be stored in several different object definitions. It could be in the node definition itself or it could be in one or more static group definitions. The precedence for determining which value to use is to choose the attribute value specified in the node definition if it is provided. If not, then each static group that the node belongs to will be checked to see if the attribute is set. The first value that is found is the value that is used. The static groups are checked in the order that they are specified in the &quot;groups&quot;attribute of the node definition.</p>
<p>NOTE: In a large cluster environment it is recommended to focus on group definitions as much as possible and avoid setting the attribute values in the individual node definition. (Of course some attribute values, such as a MAC addresses etc., are only appropriate for individual nodes.) Care must be taken to avoid confusion over which values will be inherited by the nodes.</p>
<p>Group definitions can be created using the mkdef command, changed using the chdef command, listed using the lsdef command and removed using the rmdef command.</p>
<h3 id="creating-a-static-node-group"><a href="#TOC">Creating a static node group</a></h3>
<p>There are two basic ways to create xCAT static node groups. You can either set the &quot;groups&quot;attribute of the node definition or you can create a group definition directly.</p>
<p>You can set the &quot;groups&quot;attribute of the node definition when you are defining the node with the mkdef or nodeadd command or you can modify the attribute later using the chdef or nodech command. For example, if you want a set of nodes to be added to the group &quot;aixnodes&quot;,you could run chdef or nodech as follows.</p>
<pre><code>    chdef -t node -p -o node01,node02,node03 groups=aixnodes</code></pre>
<p>or</p>
<pre><code>    nodech node01,node02,node03 groups=aixnodes</code></pre>
<p>The &quot;-p&quot;(plus) option specifies that &quot;aixnodes&quot;be added to any existing value for the &quot;groups&quot;attribute. The &quot;-p&quot;(plus) option is not supported by nodech command.</p>
<p>The second option would be to create a new group definition directly using the mkdef command as follows.</p>
<pre><code>    mkdef -t group -o aixnodes members=&quot;node01,node02,node03&quot;</code></pre>
<p>These two options will result in exactly the same definitions and attribute values being created in the xCAT database.</p>
<h3 id="creating-a-dynamic-node-group"><a href="#TOC">Creating a dynamic node group</a></h3>
<p>The selection criteria for a dynamic node group is specified by providing a list of &quot;attr&lt;operator&gt;val&quot; pairs that can be used to determine the members of a group. The valid operators include: &quot;==&quot;, &quot;!=&quot;, &quot;=~&quot;and &quot;!~&quot;. The &quot;attr&quot; field can be any node definition attribute returned by the lsdef command. The &quot;val&quot; field in selection criteria can be a simple sting or a regular expression. A regular expression can only be specified when using the &quot;=~&quot; or &quot;!~&quot; operators. See &lt;http://www.perl.com/doc/manual/html/pod/perlre.html&gt; for information on the format and syntax of regular expressions.</p>
<p>Operator descriptions:</p>
<pre><code>    == Select nodes where the attribute value is exactly this value.
    != Select nodes where the attribute value is not this specific value.
    =~ Select nodes where the attribute value matches this regular expression.
    !~ Select nodes where the attribute value does not match this regular expression.
</code></pre>
<p>The selection criteria can be specified using one or more &quot;-w attr&lt;operator&gt;val&quot;options on the command line.</p>
<p>If the &quot;val&quot;field includes spaces or any other characters that will be parsed by shell then the &quot;attr&lt;operator&gt;val&quot; needs to be quoted.</p>
<p>For example, to create a dynamic node group called mygroup, where the hardware control point is hmc01 and the partition profile is not set to service.</p>
<pre><code>    mkdef -t group -o mygroup -d -w hcp==hmc01 -w pprofile!=service</code></pre>
<p>To create a dynamic node group called pslesnodes, where the operating system name includes sles and the architecture includes ppc.</p>
<pre><code>    mkdef -t group -o pslesnodes -d -w os=~sles[0-9]+ -w arch=~ppc</code></pre>
<p>To create a dynamic node group called nonpbladenodes where the node hardware management method is not set to blade and the architecture does not include ppc</p>
<pre><code>    mkdef -t group -o nonpbladenodes -d -w mgt!=blade -w &#39;arch!~ppc&#39;</code></pre>
</body>
</html>
